(this["webpackJsonpm3project-client"]=this["webpackJsonpm3project-client"]||[]).push([[0],{48:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(22),r=n.n(i),s=(n(48),n(20)),o=n(42),l=n(10),u=n(11),d=n(13),h=n(12),j=n(4),p=(n(49),n(79)),b=n(80),m=n(7),g=n(1);var O=function(e){return Object(g.jsxs)(p.a,{bg:"light",expand:"lg",children:[Object(g.jsx)(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsx)(p.a.Collapse,{id:"basic-navbar-nav",children:Object(g.jsxs)(b.a,{className:"mr-auto",children:[Object(g.jsx)(m.b,{to:"/",children:"Home"}),Object(g.jsx)(m.b,{to:"/album",children:"Portfolio"}),Object(g.jsx)(m.b,{to:"/add-form",children:"Image upload"}),Object(g.jsx)(m.b,{to:"/purchase",children:"My Purchase"}),e.user?Object(g.jsx)("button",{onClick:e.onLogout,children:"Logout"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(m.b,{style:{marginLeft:"10px"},to:"/login",children:"LogIn"}),Object(g.jsx)(m.b,{style:{marginLeft:"10px"},to:"/signup",children:"SignUp"}),Object(g.jsx)(m.b,{style:{marginLeft:"10px"},to:"/",children:"LogOut"})]})]})})]})},f=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{})}}]),n}(a.Component),x=n(6),v=n.n(x),y="http://mb-gallery.herokuapp.com";var w=function(e){return Object(g.jsxs)("form",{onSubmit:e.onSignUp,children:[Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"InputUsername",children:"Username"}),Object(g.jsx)("input",{type:"text",className:"form-control",id:"InputUsername",name:"username"})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"InputEmail",children:"Email address"}),Object(g.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"}),Object(g.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(g.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),e.error?Object(g.jsx)("p",{style:{color:"red"},children:e.error.errorMessage}):null,Object(g.jsx)("div",{class:"form-group mt-3 mb-4",children:Object(g.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})};var S=function(e){return console.log("RENDERED LOGIN"),Object(g.jsxs)("form",{onSubmit:e.onLogIn,children:[Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"InputEmail",children:"Email address"}),Object(g.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(g.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),Object(g.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})},I=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{class:"row text-center",fontcolor:"white",children:[Object(g.jsx)("h1",{children:"M.B. |\xa0Gallery"}),Object(g.jsx)("h5",{children:"Welcome!"})]}),Object(g.jsx)("div",{class:"container-sm",children:Object(g.jsx)("div",{class:"row text-center",text:"white",children:Object(g.jsx)("div",{class:"text-center",children:Object(g.jsx)(m.b,{to:"/album",children:Object(g.jsx)("h2",{children:"My Portfolio"})})})})})]})}}]),n}(a.Component);var C=function(e){return Object(g.jsx)("div",{children:e.images.map((function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{style:{width:"300px"},src:e.imageUrl,alt:"this image"}),Object(g.jsx)(m.b,{to:"/album/".concat(e._id),children:Object(g.jsx)("h2",{children:e.title})})]},e._id)}))})},D=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={image:{}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props);var t=this.props.match.params.imageId;v.a.get("".concat(y,"/api/album/").concat(t)).then((function(t){e.setState({image:t.data})})).catch((function(){console.log("Detail fetch failed")}))}},{key:"render",value:function(){var e=this.state.image,t=this.props,n=t.onDelete,a=t.handleBuy;t.user;return console.log(this.props),Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{style:{width:"400px"},src:e.imageUrl,alt:e.title}),Object(g.jsx)("div",{children:Object(g.jsx)("h5",{children:e.title})}),Object(g.jsxs)("div",{children:["Description: ",Object(g.jsx)("br",{}),Object(g.jsx)("p",{children:e.description})]}),Object(g.jsxs)("div",{children:["Genre:",Object(g.jsx)("p",{children:e.genre})]}),Object(g.jsxs)("div",{children:["Price:",Object(g.jsxs)("p",{children:[e.price," \u20ac"]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(m.b,{to:"/album/".concat(e._id,"/edit"),children:Object(g.jsx)("button",{children:"Edit"})}),Object(g.jsx)("button",{onClick:function(){n(e._id)},children:"Delete"}),Object(g.jsx)("button",{onClick:function(){a(e._id,e.price)},children:"Buy this picture"})]})]})}}]),n}(a.Component),U=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("form",{onSubmit:this.props.onAdd,children:[Object(g.jsx)("input",{name:"title",type:"text",placeholder:"Enter title"}),Object(g.jsx)("input",{name:"genre",type:"text",placeholder:"Enter Genre"}),Object(g.jsx)("input",{name:"description",type:"text",placeholder:"Enter description"}),Object(g.jsx)("input",{name:"price",type:"number",placeholder:"Enter price in \u20ac"}),Object(g.jsx)("input",{name:"imageUrl",type:"file",accept:"image/png, image/jpg"}),Object(g.jsx)("div",{class:"form-group mt-3 mb-4",children:Object(g.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})}}]),n}(a.Component),N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={image:{}},e.handleNameChange=function(t){var n=t.target.value;console.log(n);var a=JSON.parse(JSON.stringify(e.state.image));a.title=n,e.setState({image:a})},e.handleDescChange=function(t){var n=t.target.value,a=JSON.parse(JSON.stringify(e.state.image));a.description=n,e.setState({image:a})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props);var t=this.props.match.params.imageId;v.a.get("".concat(y,"/api/album/").concat(t)).then((function(t){e.setState({image:t.data})})).catch((function(){console.log("Detail fetch failed")}))}},{key:"render",value:function(){var e=this.state.image,t=this.props.onEdit;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h5",{children:"Title"}),Object(g.jsx)("input",{type:"text",onChange:this.handleNameChange,value:e.title}),Object(g.jsx)("h5",{children:"Description"})," ",Object(g.jsx)("input",{type:"text",onChange:this.handleDescChange,value:e.description}),Object(g.jsx)("h5",{children:"Genre"})," ",Object(g.jsx)("input",{type:"text",onChange:this.handleDescChange,value:e.genre}),Object(g.jsx)("button",{onClick:function(){t(e)},children:"Submit"})]})}}]),n}(a.Component),E=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={purchases:[],images:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(y,"/api/purchase"),{withCredentials:!0}).then((function(t){console.log("response from API",t.data),e.setState({purchases:t.data})})).catch((function(){console.log("Detail fetch failed")}))}},{key:"render",value:function(){var e=this.state.purchases;this.state.images;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"My purchases"}),e.map((function(e){return Object(g.jsxs)("h4",{children:["price= ",e.totalprice," \u20ac"]})}))]})}}]),n}(a.Component),k=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={images:[],loggedInUser:null,error:null},e.handleSignUp=function(t){t.preventDefault();var n={username:t.target.username.value,email:t.target.email.value,password:t.target.password.value};v.a.post("".concat(y,"/api/signup"),n,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/")}))})).catch((function(t){e.setState({error:t.response.data})}))},e.handleLogIn=function(t){t.preventDefault();var n={email:t.target.email.value,password:t.target.password.value};v.a.post("".concat(y,"/api/login"),n,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/")}))})).catch((function(e){console.log("Something went wrong",e)}))},e.handleLogout=function(){v.a.post("".concat(y,"/api/logout"),{},{withCredentials:!0}).then((function(){e.setState({loggedInUser:null},(function(){e.props.history.push("/")}))}))},e.handlePurchase=function(){v.a.get("".concat(y,"/api/purchase"),{},{withCredentials:!0});var t=e.state.then((function(){e.setState({loggedInUser:null},(function(){e.props.history.push("/")}))}));t.images,t.loggedInUser,t.error},e.handleBuy=function(t,n){console.log(t),v.a.post("".concat(y,"/api/purchase"),{image_id:t,totalprice:n,date:new Date},{withCredentials:!0}).then((function(t){e.setState({},(function(){e.props.history.push("/album")}))})).catch((function(e){console.log("Create purchase failed",e)}))},e.handleDelete=function(t){v.a.delete("".concat(y,"/api/album/").concat(t),{},{withCredentials:!0}).then((function(){var n=e.state.image.filter((function(e){return e._id!==t}));e.setState({image:n},(function(){e.props.history.push("/album")}))})).catch((function(e){console.log("Delete failed",e)}))},e.handleEditImage=function(t){console.log(t),v.a.patch("".concat(y,"/api/album/").concat(t._id),{title:t.title,genre:t.genre,description:t.description,imageUrl:t.imageUrl,price:t.price},{withCredentials:!0}).then((function(){var n=e.state.images.map((function(e){return t._id===e._id&&(e.title=t.title,e.description=t.description,e.genre=t.genre,e.price=t.price),e}));e.setState({Album:n},(function(){e.props.history.push("/album/".concat(t._id))}))})).catch((function(e){console.log("Edit failed",e)}))},e.handleSubmit=function(t){t.preventDefault();var n=t.target.title.value,a=t.target.genre.value,c=t.target.description.value,i=(t.target.price.value,t.target.imageUrl.files[0]),r=new FormData;r.append("imageUrl",i),v.a.post("".concat(y,"/api/upload"),r,{withCredentials:!0}).then((function(i){v.a.post("".concat(y,"/api/create"),{title:n,genre:a,description:c,image:i.data.image,price:t.target.price.value}).then((function(t){e.setState({image:[t.data].concat(Object(o.a)(e.state.image))},(function(){e.props.history.push("/album")}))})).catch((function(e){console.log("Create failed",e)}))})).catch((function(){}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(y,"/api/album"),{withCredentials:!0}).then((function(t){console.log("response from API",t.data),e.setState({images:t.data})})).catch((function(){console.log("Fetching failed")})),this.state.loggedInUser||v.a.get("".concat(y,"/api/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data})})).catch((function(){}))}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{children:[Object(g.jsx)(O,{onLogout:this.handleLogout,user:this.state.loggedInUser}),Object(g.jsxs)(j.c,{children:[Object(g.jsx)(j.a,{exact:!0,path:"/",component:I}),Object(g.jsx)(j.a,{path:"/signup",render:function(t){return Object(g.jsx)(w,Object(s.a)({onSignUp:e.handleSignUp},t))}}),Object(g.jsx)(j.a,{path:"/login",render:function(t){return Object(g.jsx)(S,Object(s.a)({onLogIn:e.handleLogIn},t))}}),Object(g.jsx)(j.a,{exact:!0,path:"/album",render:function(t){return Object(g.jsx)(C,Object(s.a)({images:e.state.images},t))}}),Object(g.jsx)(j.a,{path:"/add-form",render:function(t){return Object(g.jsx)(U,Object(s.a)({onAdd:e.handleSubmit},t))}}),Object(g.jsx)(j.a,{exact:!0,path:"/album/:imageId",render:function(t){return Object(g.jsx)(D,Object(s.a)({onDelete:e.handleDelete,handleBuy:e.handleBuy},t))}}),Object(g.jsx)(j.a,{exact:!0,path:"/album/:imageId/edit",render:function(t){return Object(g.jsx)(N,Object(s.a)({onEdit:e.handleEditImage,onDelete:e.handleDelete},t))}}),Object(g.jsx)(j.a,{exact:!0,path:"/purchase",render:function(t){return Object(g.jsx)(E,{onPurchase:e.handlePurchase})}})]}),Object(g.jsx)(f,{})]})}}]),n}(a.Component),L=Object(j.f)(k);r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(m.a,{children:Object(g.jsx)(L,{})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.d9c0156e.chunk.js.map